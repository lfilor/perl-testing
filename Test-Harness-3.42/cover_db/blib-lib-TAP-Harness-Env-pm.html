<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 1.36
Devel::Cover is copyright 2001-2019, Paul Johnson (paul@pjcj.net)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
http://www.pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>File Coverage: blib/lib/TAP/Harness/Env.pm</title>
</head>
<body>
<h1>File Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">blib/lib/TAP/Harness/Env.pm</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c0">50.4%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>stmt</th><th>bran</th><th>cond</th><th>sub</th><th>pod</th><th>time</th><th>code</th></tr>
<tr><td class="h">1</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">package TAP::Harness::Env;</td></tr>
<tr><td class="h">2</td><td colspan="7"></td></tr><tr><td class="h">3</td><td><div class="c3">7</div><div class="c3">7</div><div class="c3">7</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-TAP-Harness-Env-pm--subroutine.html#L3">7</a></div></td><td></td><td><div>48958</div><div>25</div><div>75</div></td><td class="s">use strict;</td></tr>
<tr><td class="h">4</td><td><div class="c3">7</div><div class="c3">7</div><div class="c3">7</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-TAP-Harness-Env-pm--subroutine.html#L4">7</a></div></td><td></td><td><div>9</div><div>5</div><div>126</div></td><td class="s">use warnings;</td></tr>
<tr><td class="h">5</td><td colspan="7"></td></tr><tr><td class="h">6</td><td><div class="c3">7</div><div class="c3">7</div><div class="c3">7</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-TAP-Harness-Env-pm--subroutine.html#L6">7</a></div></td><td></td><td><div>13</div><div>11</div><div>199</div></td><td class="s">use constant IS_VMS =&gt; ( $^O eq &#39;VMS&#39; );</td></tr>
<tr><td class="h">7</td><td><div class="c3">7</div><div class="c3">7</div><div class="c3">7</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-TAP-Harness-Env-pm--subroutine.html#L7">7</a></div></td><td></td><td><div>557</div><div>12</div><div>98</div></td><td class="s">use TAP::Object;</td></tr>
<tr><td class="h">8</td><td><div class="c3">7</div><div class="c3">7</div><div class="c3">7</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-TAP-Harness-Env-pm--subroutine.html#L8">7</a></div></td><td></td><td><div>496</div><div>2449</div><div>3254</div></td><td class="s">use Text::ParseWords qw/shellwords/;</td></tr>
<tr><td class="h">9</td><td colspan="7"></td></tr><tr><td class="h">10</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">our $VERSION = &#39;3.42&#39;;</td></tr>
<tr><td class="h">11</td><td colspan="7"></td></tr><tr><td class="h">12</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Get the parts of @INC which are changed from the stock list AND</td></tr>
<tr><td class="h">13</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># preserve reordering of stock directories.</td></tr>
<tr><td class="h">14</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _filtered_inc_vms {</td></tr>
<tr><td class="h">15</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="blib-lib-TAP-Harness-Env-pm--subroutine.html#L15">0</a></div></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @inc = grep { !ref } @INC;&nbsp;&nbsp;&nbsp;&nbsp;#28567</td></tr>
<tr><td class="h">16</td><td colspan="7"></td></tr><tr><td class="h">17</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# VMS has a 255-byte limit on the length of %ENV entries, so</td></tr>
<tr><td class="h">18</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# toss the ones that involve perl_root, the install location</td></tr>
<tr><td class="h">19</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;@inc = grep { !/perl_root/i } @inc;</td></tr>
<tr><td class="h">20</td><td colspan="7"></td></tr><tr><td class="h">21</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @default_inc = _default_inc();</td></tr>
<tr><td class="h">22</td><td colspan="7"></td></tr><tr><td class="h">23</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @new_inc;</td></tr>
<tr><td class="h">24</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %seen;</td></tr>
<tr><td class="h">25</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for my $dir (@inc) {</td></tr>
<tr><td class="h">26</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-TAP-Harness-Env-pm--branch.html#L26">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if $seen{$dir}++;</td></tr>
<tr><td class="h">27</td><td colspan="7"></td></tr><tr><td class="h">28</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-TAP-Harness-Env-pm--branch.html#L28">0</a></div></td><td><div class="c0"><a href="blib-lib-TAP-Harness-Env-pm--condition.html#L28">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $dir eq ( $default_inc[0] || &#39;&#39; ) ) {</td></tr>
<tr><td class="h">29</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shift @default_inc;</td></tr>
<tr><td class="h">30</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">31</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">32</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @new_inc, $dir;</td></tr>
<tr><td class="h">33</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">34</td><td colspan="7"></td></tr><tr><td class="h">35</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="blib-lib-TAP-Harness-Env-pm--condition.html#L35">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shift @default_inc while @default_inc and $seen{ $default_inc[0] };</td></tr>
<tr><td class="h">36</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">37</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @new_inc;</td></tr>
<tr><td class="h">38</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">39</td><td colspan="7"></td></tr><tr><td class="h">40</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Cache this to avoid repeatedly shelling out to Perl.</td></tr>
<tr><td class="h">41</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my @inc;</td></tr>
<tr><td class="h">42</td><td colspan="7"></td></tr><tr><td class="h">43</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _default_inc {</td></tr>
<tr><td class="h">44</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-TAP-Harness-Env-pm--branch.html#L44">0</a></div></td><td></td><td><div class="c0"><a href="blib-lib-TAP-Harness-Env-pm--subroutine.html#L44">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @inc if @inc;</td></tr>
<tr><td class="h">45</td><td colspan="7"></td></tr><tr><td class="h">46</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $ENV{PERL5LIB};</td></tr>
<tr><td class="h">47</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $ENV{PERLLIB};</td></tr>
<tr><td class="h">48</td><td colspan="7"></td></tr><tr><td class="h">49</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="blib-lib-TAP-Harness-Env-pm--condition.html#L49">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $perl = $ENV{HARNESS_PERL} || $^X;</td></tr>
<tr><td class="h">50</td><td colspan="7"></td></tr><tr><td class="h">51</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Avoid using -l for the benefit of Perl 6</td></tr>
<tr><td class="h">52</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;chomp( @inc = `&quot;$perl&quot; -e &quot;print join qq[\\n], \@INC, q[]&quot;` );</td></tr>
<tr><td class="h">53</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @inc;</td></tr>
<tr><td class="h">54</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">55</td><td colspan="7"></td></tr><tr><td class="h">56</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub create {</td></tr>
<tr><td class="h">57</td><td><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-TAP-Harness-Env-pm--subroutine.html#L57">5</a></div></td><td><div class="c3">1</div></td><td><div>59392</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $package = shift;</td></tr>
<tr><td class="h">58</td><td><div class="c3">5</div><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-TAP-Harness-Env-pm--branch.html#L58">100</a></div></td><td></td><td></td><td></td><td><div>6</div><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %input = %{ shift || {} };</td></tr>
<tr><td class="h">59</td><td colspan="7"></td></tr><tr><td class="h">60</td><td><div class="c3">5</div><div class="c3">5</div></td><td><div class="c0" title="T/-"><a href="blib-lib-TAP-Harness-Env-pm--branch.html#L60">50</a></div></td><td></td><td></td><td></td><td><div>6</div><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @libs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= @{ delete $input{libs}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| [] };</td></tr>
<tr><td class="h">61</td><td><div class="c3">5</div><div class="c3">5</div></td><td><div class="c0" title="T/-"><a href="blib-lib-TAP-Harness-Env-pm--branch.html#L61">50</a></div></td><td></td><td></td><td></td><td><div>6</div><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @raw_switches = @{ delete $input{switches} || [] };</td></tr>
<tr><td class="h">62</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @opt</td></tr>
<tr><td class="h">63</td><td><div class="c3">5</div></td><td></td><td><div class="c0"><a href="blib-lib-TAP-Harness-Env-pm--condition.html#L63">50</a></div></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= ( @raw_switches, shellwords( $ENV{HARNESS_PERL_SWITCHES} || &#39;&#39; ) );</td></tr>
<tr><td class="h">64</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>217</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @switches;</td></tr>
<tr><td class="h">65</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while ( my $opt = shift @opt ) {</td></tr>
<tr><td class="h">66</td><td><div class="c3">5</div></td><td><div class="c0" title="-/F"><a href="blib-lib-TAP-Harness-Env-pm--branch.html#L66">50</a></div></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $opt =~ /^ -I (.*) $ /x ) {</td></tr>
<tr><td class="h">67</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-TAP-Harness-Env-pm--branch.html#L67">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @libs, length($1) ? $1 : shift @opt;</td></tr>
<tr><td class="h">68</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">69</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">70</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @switches, $opt;</td></tr>
<tr><td class="h">71</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">72</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">73</td><td colspan="7"></td></tr><tr><td class="h">74</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Do things the old way on VMS...</td></tr>
<tr><td class="h">75</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;push @libs, _filtered_inc_vms() if IS_VMS;</td></tr>
<tr><td class="h">76</td><td colspan="7"></td></tr><tr><td class="h">77</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# If $Verbose isn&#39;t numeric default to 1. This helps core.</td></tr>
<tr><td class="h">78</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $verbose</td></tr>
<tr><td class="h">79</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $ENV{HARNESS_VERBOSE}</td></tr>
<tr><td class="h">80</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;? $ENV{HARNESS_VERBOSE} !~ /\d/</td></tr>
<tr><td class="h">81</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;? 1</td></tr>
<tr><td class="h">82</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: $ENV{HARNESS_VERBOSE}</td></tr>
<tr><td class="h">83</td><td><div class="c3">5</div></td><td><div class="c0" title="-/-"><a href="blib-lib-TAP-Harness-Env-pm--branch.html#L83">0</a></div><div class="c0" title="-/F"><a href="blib-lib-TAP-Harness-Env-pm--branch.html#L83">50</a></div></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 0;</td></tr>
<tr><td class="h">84</td><td colspan="7"></td></tr><tr><td class="h">85</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %args = (</td></tr>
<tr><td class="h">86</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lib&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; \@libs,</td></tr>
<tr><td class="h">87</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $ENV{HARNESS_TIMER} || 0,</td></tr>
<tr><td class="h">88</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switches&nbsp;&nbsp;&nbsp;&nbsp;=&gt; \@switches,</td></tr>
<tr><td class="h">89</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $ENV{HARNESS_COLOR} || 0,</td></tr>
<tr><td class="h">90</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;verbosity&nbsp;&nbsp;&nbsp;=&gt; $verbose,</td></tr>
<tr><td class="h">91</td><td><div class="c3">5</div></td><td></td><td><div class="c0"><a href="blib-lib-TAP-Harness-Env-pm--condition.html#L91">50</a></div><div class="c3"><a href="blib-lib-TAP-Harness-Env-pm--condition.html#L91">100</a></div><div class="c0"><a href="blib-lib-TAP-Harness-Env-pm--condition.html#L91">50</a></div></td><td></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ignore_exit =&gt; $ENV{HARNESS_IGNORE_EXIT} || 0,</td></tr>
<tr><td class="h">92</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">93</td><td colspan="7"></td></tr><tr><td class="h">94</td><td><div class="c3">5</div></td><td></td><td><div class="c0"><a href="blib-lib-TAP-Harness-Env-pm--condition.html#L94">50</a></div></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $class = delete $input{harness_class} || $ENV{HARNESS_SUBCLASS} || &#39;TAP::Harness&#39;;</td></tr>
<tr><td class="h">95</td><td><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-TAP-Harness-Env-pm--branch.html#L95">100</a></div></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ( defined( my $env_opt = $ENV{HARNESS_OPTIONS} ) ) {</td></tr>
<tr><td class="h">96</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>2</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $opt ( split /:/, $env_opt ) {</td></tr>
<tr><td class="h">97</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-TAP-Harness-Env-pm--branch.html#L97">100</a></div><div class="c0" title="T/-"><a href="blib-lib-TAP-Harness-Env-pm--branch.html#L97">50</a></div><div class="c0" title="-/-"><a href="blib-lib-TAP-Harness-Env-pm--branch.html#L97">0</a></div><div class="c0" title="-/-"><a href="blib-lib-TAP-Harness-Env-pm--branch.html#L97">0</a></div></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $opt =~ /^j(\d*)$/ ) {</td></tr>
<tr><td class="h">98</td><td><div class="c3">1</div></td><td></td><td><div class="c0"><a href="blib-lib-TAP-Harness-Env-pm--condition.html#L98">50</a></div></td><td></td><td></td><td><div>2</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$args{jobs} = $1 || 9;</td></tr>
<tr><td class="h">99</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">100</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif ( $opt eq &#39;c&#39; ) {</td></tr>
<tr><td class="h">101</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>1</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$args{color} = 1;</td></tr>
<tr><td class="h">102</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">103</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif ( $opt =~ m/^f(.*)$/ ) {</td></tr>
<tr><td class="h">104</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fmt = $1;</td></tr>
<tr><td class="h">105</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$fmt =~ s/-/::/g;</td></tr>
<tr><td class="h">106</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$args{formatter_class} = $fmt;</td></tr>
<tr><td class="h">107</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">108</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif ( $opt =~ m/^a(.*)$/ ) {</td></tr>
<tr><td class="h">109</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $archive = $1;</td></tr>
<tr><td class="h">110</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$class = &#39;TAP::Harness::Archive&#39;;</td></tr>
<tr><td class="h">111</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$args{archive} = $archive;</td></tr>
<tr><td class="h">112</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">113</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">114</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die &quot;Unknown HARNESS_OPTIONS item: $opt\n&quot;;</td></tr>
<tr><td class="h">115</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">116</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">117</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">118</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return TAP::Object-&gt;_construct($class, { %args, %input });</td></tr>
<tr><td class="h">119</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">120</td><td colspan="7"></td></tr><tr><td class="h">121</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">1;</td></tr>
<tr><td class="h">122</td><td colspan="7"></td></tr><tr><td class="h">123 - 215</td><td colspan="6"></td><td class="s"><pre>=head1 NAME

TAP::Harness::Env - Parsing harness related environmental variables where appropriate

=head1 VERSION

Version 3.42

=head1 SYNOPSIS

 my $harness = TAP::Harness::Env-&gt;create(\%extra_args)

=head1 DESCRIPTION

This module implements the environmental variables that L&lt;Test::Harness&gt; uses with TAP::Harness, and instantiates the appropriate class with the appropriate arguments.

=head1 METHODS

=over 4

=item * create( \%args )

This function reads the environment and generates an appropriate argument hash from it. If given any arguments in C&lt;%extra_args&gt;, these will override the environmental defaults. In accepts C&lt;harness_class&gt; (which defaults to C&lt;TAP::Harness&gt;), and any argument the harness class accepts.

=back

=head1 ENVIRONMENTAL VARIABLES

=over 4

=item C&lt;HARNESS_PERL_SWITCHES&gt;

Setting this adds perl command line switches to each test file run.

For example, C&lt;HARNESS_PERL_SWITCHES=-T&gt; will turn on taint mode.
C&lt;HARNESS_PERL_SWITCHES=-MDevel::Cover&gt; will run C&lt;Devel::Cover&gt; for
each test.

=item C&lt;HARNESS_VERBOSE&gt;

If true, C&lt;TAP::Harness&gt; will output the verbose results of running
its tests.

=item C&lt;HARNESS_SUBCLASS&gt;

Specifies a TAP::Harness subclass to be used in place of TAP::Harness.

=item C&lt;HARNESS_OPTIONS&gt;

Provide additional options to the harness. Currently supported options are:

=over

=item C&lt;&lt; j&lt;n&gt; &gt;&gt;

Run &lt;n&gt; (default 9) parallel jobs.

=item C&lt;&lt; c &gt;&gt;

Try to color output. See L&lt;TAP::Formatter::Base/&quot;new&quot;&gt;.

=item C&lt;&lt; a&lt;file.tgz&gt; &gt;&gt;

Will use L&lt;TAP::Harness::Archive&gt; as the harness class, and save the TAP to
C&lt;file.tgz&gt;

=item C&lt;&lt; fPackage-With-Dashes &gt;&gt;

Set the formatter_class of the harness being run. Since the C&lt;HARNESS_OPTIONS&gt;
is seperated by C&lt;:&gt;, we use C&lt;-&gt; instead.

=back

Multiple options may be separated by colons:

&nbsp;&nbsp;&nbsp;&nbsp;HARNESS_OPTIONS=j9:c make test

=item C&lt;HARNESS_TIMER&gt;

Setting this to true will make the harness display the number of
milliseconds each test took.&nbsp;&nbsp;You can also use F&lt;prove&gt;&#39;s C&lt;--timer&gt;
switch.

=item C&lt;HARNESS_COLOR&gt;

Attempt to produce color output.

=item C&lt;HARNESS_IGNORE_EXIT&gt;

If set to a true value instruct C&lt;TAP::Parser&gt; to ignore exit and wait
status from test scripts.

=back</pre></td></tr>
</table>
</body>
</html>
